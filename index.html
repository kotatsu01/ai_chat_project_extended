<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>AIã£ã½ã„ãƒãƒ£ãƒƒãƒˆæ‹¡å¼µç‰ˆ</title>
  <style>
    body { font-family: "Arial", sans-serif; padding: 20px; }
    #result { margin-top: 10px; font-weight: bold; }
    button.feedback { margin: 5px; }
  </style>
  <script>
    async function sendAnswer() {
      const formData = new FormData(document.getElementById("answerForm"));
      await fetch("/submit", { method: "POST", body: formData });
      alert("å›ç­”ãŒé€ä¿¡ã•ã‚Œã¾ã—ãŸï¼");
    }

    async function askQuestion() {
      const formData = new FormData(document.getElementById("questionForm"));
      const res = await fetch("/ask", { method: "POST", body: formData });
      const data = await res.json();
      document.getElementById("result").innerText = data.response;
      document.getElementById("feedbackButtons").style.display = "block";
    }

    async function sendFeedback(rating) {
      const formData = new FormData();
      formData.append("rating", rating);
      await fetch("/feedback", { method: "POST", body: formData });
      alert("ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼");
    }
  </script>
</head>
<body>
  <h2>ğŸ“ å›ç­”ãƒ•ã‚©ãƒ¼ãƒ </h2>
  <form id="answerForm" onsubmit="event.preventDefault(); sendAnswer();">
    <input type="text" name="new_answer" placeholder="A.å›ç­”ã‚’å…¥åŠ›">
    <button type="submit">é€ä¿¡</button>
  </form>

  <h2>â“ è³ªå•ãƒ•ã‚©ãƒ¼ãƒ </h2>
  <form id="questionForm" onsubmit="event.preventDefault(); askQuestion();">
    <input type="text" name="question" placeholder="è³ªå•ã‚’å…¥åŠ›">
    <button type="submit">è³ªå•ã™ã‚‹</button>
  </form>

  <h3>ğŸ—¨ï¸ å›ç­”çµæœ:</h3>
  <div id="result"></div>
  <div id="feedbackButtons" style="display:none;">
    <button class="feedback" onclick="sendFeedback('good')">ğŸ‘</button>
    <button class="feedback" onclick="sendFeedback('bad')">ğŸ‘</button>
  </div>
</body>
</html>
